<!DOCTYPE html><html lang="en"><head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.35">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<link rel="stylesheet" type="text/css" href="manual.css">
<title>OCaml - The threads library</title>
<script src="scroll.js"></script><script src="navigation.js"></script><link rel="shortcut icon" type="image/x-icon" href="favicon.ico"></head>
<body><div class="content manual"><div id="sidebar-button"><span>☰</span></div><nav id="part-title"><span>☰</span>The OCaml library</nav><ul id="part-menu"><li><a href="core.html">The core library</a></li><li><a href="stdlib.html">The standard library</a></li><li><a href="parsing.html">The compiler front-end</a></li><li><a href="libunix.html">The unix library: Unix system calls</a></li><li><a href="libstr.html">The str library: regular expressions and string processing</a></li><li class="active"><a href="libthreads.html">The threads library</a></li><li><a href="libdynlink.html">The dynlink library: dynamic loading and linking of object files</a></li><li><a href="old.html">Recently removed or moved libraries (Graphics, Bigarray, Num, LablTk)</a></li></ul><header id="sidebar"><nav class="toc brand"><a class="brand" href="https://ocaml.org/"><img src="colour-logo.svg" class="svg" alt="OCaml"></a></nav><nav class="toc"><div class="toc_version"><a id="version-select" href="https://ocaml.org/releases/">Version 4.13</a></div><div class="toc_title"><a href="index.html">&lt; The OCaml Manual</a></div></nav></header>




<h1 class="chapter" id="sec576"><span class="number">Chapter 29</span>The threads library</h1>
<p>
<a id="c:threads"></a></p><p>The <span class="machine"><span class="font-tt">threads</span></span> library allows concurrent programming in OCaml.
It provides multiple threads of control (also called lightweight
processes) that execute concurrently in the same memory space. Threads
communicate by in-place modification of shared data structures, or by
sending and receiving data on communication channels.</p><p>The <span class="machine"><span class="font-tt">threads</span></span> library is implemented on top of the threading
facilities provided by the operating system: POSIX 1003.1c threads for
Linux, MacOS, and other Unix-like systems; Win32 threads for Windows.
Only one thread at a time is allowed to run OCaml code, hence
opportunities for parallelism are limited to the parts of the program
that run system or C library code. However, threads provide
concurrency and can be used to structure programs as several
communicating processes. Threads also efficiently support concurrent,
overlapping I/O operations.</p><p>Programs that use threads must be linked as follows:
</p><pre>        ocamlc -I +threads <span class="font-it">other options</span> unix.cma threads.cma <span class="font-it">other files</span>
        ocamlopt -I +threads <span class="font-it">other options</span> unix.cmxa threads.cmxa <span class="font-it">other files</span>
</pre><p>
Compilation units that use the <span class="machine"><span class="font-tt">threads</span></span> library must also be compiled with
the <span class="machine"><span class="font-tt">-I +threads</span></span> option (see chapter ‍<a href="comp.html#c%3Acamlc">11</a>).</p><ul class="ftoc2"><li class="li-links">
<a href="../api/Thread.html">Module <span class="font-tt">Thread</span></a>: lightweight threads
</li><li class="li-links"><a href="../api/Mutex.html">Module <span class="font-tt">Mutex</span></a>: locks for mutual exclusion
</li><li class="li-links"><a href="../api/Condition.html">Module <span class="font-tt">Condition</span></a>: condition variables to synchronize between threads
</li><li class="li-links"><a href="../api/Semaphore.html">Module <span class="font-tt">Semaphore</span></a>: semaphores, another thread synchronization mechanism
</li><li class="li-links"><a href="../api/Event.html">Module <span class="font-tt">Event</span></a>: first-class synchronous communication
</li></ul>
<hr>
<div class="bottom-navigation"><a class="previous" href="libstr.html">« The str library: regular expressions and string processing</a><a class="next" href="libdynlink.html">The dynlink library: dynamic loading and linking of object files »</a></div>




<div class="copyright">Copyright © 2021 Institut National de
Recherche en Informatique et en Automatique</div></div></body></html>