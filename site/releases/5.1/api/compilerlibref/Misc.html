<!DOCTYPE html><html><head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Local_store.html">
<link rel="next" href="Numbers.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel="Appendix" href="index_types.html">
<link title="Index of extensions" rel="Appendix" href="index_extensions.html">
<link title="Index of exceptions" rel="Appendix" href="index_exceptions.html">
<link title="Index of values" rel="Appendix" href="index_values.html">
<link title="Index of modules" rel="Appendix" href="index_modules.html">
<link title="Index of module types" rel="Appendix" href="index_module_types.html">
<link title="Compiler_libs" rel="Chapter" href="Compiler_libs.html">
<link title="Ast_helper" rel="Chapter" href="Ast_helper.html">
<link title="Ast_invariants" rel="Chapter" href="Ast_invariants.html">
<link title="Ast_iterator" rel="Chapter" href="Ast_iterator.html">
<link title="Ast_mapper" rel="Chapter" href="Ast_mapper.html">
<link title="Asttypes" rel="Chapter" href="Asttypes.html">
<link title="Attr_helper" rel="Chapter" href="Attr_helper.html">
<link title="Builtin_attributes" rel="Chapter" href="Builtin_attributes.html">
<link title="CamlinternalMenhirLib" rel="Chapter" href="CamlinternalMenhirLib.html">
<link title="Depend" rel="Chapter" href="Depend.html">
<link title="Docstrings" rel="Chapter" href="Docstrings.html">
<link title="Lexer" rel="Chapter" href="Lexer.html">
<link title="Location" rel="Chapter" href="Location.html">
<link title="Longident" rel="Chapter" href="Longident.html">
<link title="Parse" rel="Chapter" href="Parse.html">
<link title="Parser" rel="Chapter" href="Parser.html">
<link title="Parsetree" rel="Chapter" href="Parsetree.html">
<link title="Pprintast" rel="Chapter" href="Pprintast.html">
<link title="Printast" rel="Chapter" href="Printast.html">
<link title="Syntaxerr" rel="Chapter" href="Syntaxerr.html">
<link title="Arg_helper" rel="Chapter" href="Arg_helper.html">
<link title="Binutils" rel="Chapter" href="Binutils.html">
<link title="Build_path_prefix_map" rel="Chapter" href="Build_path_prefix_map.html">
<link title="Ccomp" rel="Chapter" href="Ccomp.html">
<link title="Clflags" rel="Chapter" href="Clflags.html">
<link title="Compression" rel="Chapter" href="Compression.html">
<link title="Config_boot" rel="Chapter" href="Config_boot.html">
<link title="Config_main" rel="Chapter" href="Config_main.html">
<link title="Config" rel="Chapter" href="Config.html">
<link title="Consistbl" rel="Chapter" href="Consistbl.html">
<link title="Diffing" rel="Chapter" href="Diffing.html">
<link title="Diffing_with_keys" rel="Chapter" href="Diffing_with_keys.html">
<link title="Domainstate" rel="Chapter" href="Domainstate.html">
<link title="Identifiable" rel="Chapter" href="Identifiable.html">
<link title="Int_replace_polymorphic_compare" rel="Chapter" href="Int_replace_polymorphic_compare.html">
<link title="Lazy_backtrack" rel="Chapter" href="Lazy_backtrack.html">
<link title="Load_path" rel="Chapter" href="Load_path.html">
<link title="Local_store" rel="Chapter" href="Local_store.html">
<link title="Misc" rel="Chapter" href="Misc.html">
<link title="Numbers" rel="Chapter" href="Numbers.html">
<link title="Profile" rel="Chapter" href="Profile.html">
<link title="Strongly_connected_components" rel="Chapter" href="Strongly_connected_components.html">
<link title="Targetint" rel="Chapter" href="Targetint.html">
<link title="Terminfo" rel="Chapter" href="Terminfo.html">
<link title="Warnings" rel="Chapter" href="Warnings.html">
<link title="Pparse" rel="Chapter" href="Pparse.html"><link title="Reporting fatal errors" rel="Section" href="#1_Reportingfatalerrors">
<link title="Exceptions and finalization" rel="Section" href="#1_Exceptionsandfinalization">
<link title="List operations" rel="Section" href="#1_Listoperations">
<link title="Hash table operations" rel="Section" href="#1_Hashtableoperations">
<link title="Extensions to the standard library" rel="Section" href="#1_Extensionstothestandardlibrary">
<link title="Operations on files and file paths" rel="Section" href="#1_Operationsonfilesandfilepaths">
<link title="Integer operations" rel="Section" href="#1_Integeroperations">
<link title="String operations" rel="Section" href="#1_Stringoperations">
<link title="Operations on references" rel="Section" href="#1_Operationsonreferences">
<link title="Operations on triples and quadruples" rel="Section" href="#1_Operationsontriplesandquadruples">
<link title="Long strings" rel="Section" href="#1_Longstrings">
<link title="Spell checking and ``did you mean'' suggestions" rel="Section" href="#1_Spellcheckinganddidyoumeansuggestions">
<link title="Colored terminal output " rel="Section" href="#1_Coloredterminaloutput">
<link title="Formatted output" rel="Section" href="#1_Formattedoutput">
<link title="Displaying configuration variables" rel="Section" href="#1_Displayingconfigurationvariables">
<link title="Handling of build maps" rel="Section" href="#1_Handlingofbuildmaps">
<link title="Handling of magic numbers" rel="Section" href="#1_Handlingofmagicnumbers">
<link title="Miscellaneous type aliases" rel="Section" href="#1_Miscellaneoustypealiases">
<title>OCaml compiler library : Misc</title>
<script src="search.js"></script><script src="scroll.js"></script><script src="navigation.js"></script><link rel="shortcut icon" type="image/x-icon" href="favicon.ico"></head>
<body><div class="api"><div id="sidebar-button"><span>â˜°</span></div><header id="sidebar"><nav class="toc brand"><a class="brand" href="../../manual/index.html"><img src="colour-logo.svg" class="svg" alt="OCaml"></a></nav><nav class="toc"><div class="toc_version"><a id="version-select" href="https://ocaml.org/releases/">Compiler API Version 5.1</a></div><a href="index.html">&lt; General Index</a><div class="api_search"><input type="text" name="apisearch" id="api_search" class="api_search" oninput="mySearch(false);" onkeypress="this.oninput();" onclick="this.oninput();" onpaste="this.oninput();">
<img src="search_icon.svg" alt="Search" class="api_search svg" onclick="mySearch(false)"></div>
<div id="search_results"></div><div class="toc_title"><a href="#top">OCaml compiler library : Misc</a></div><ul><li><a href="#1_Reportingfatalerrors">Reporting fatal errors</a></li><li><a href="#1_Exceptionsandfinalization">Exceptions and finalization</a></li><li><a href="#1_Listoperations">List operations</a></li><li><a href="#1_Hashtableoperations">Hash table operations</a></li><li><a href="#1_Extensionstothestandardlibrary">Extensions to the standard library</a></li><li><a href="#1_Operationsonfilesandfilepaths">Operations on files and file paths</a></li><li><a href="#1_Integeroperations">Integer operations</a></li><li><a href="#1_Stringoperations">String operations</a></li><li><a href="#1_Operationsonreferences">Operations on references</a></li><li><a href="#1_Operationsontriplesandquadruples">Operations on triples and quadruples</a></li><li><a href="#1_Longstrings">Long strings</a></li><li><a href="#1_Spellcheckinganddidyoumeansuggestions">Spell checking and ``did you mean'' suggestions</a></li><li><a href="#1_Coloredterminaloutput">Colored terminal output </a></li><li><a href="#1_Formattedoutput">Formatted output</a></li><li><a href="#1_Displayingconfigurationvariables">Displaying configuration variables</a></li><li><a href="#1_Handlingofbuildmaps">Handling of build maps</a></li><li><a href="#1_Handlingofmagicnumbers">Handling of magic numbers</a></li><li><a href="#1_Miscellaneoustypealiases">Miscellaneous type aliases</a></li></ul></nav></header>
<h1>Module <a href="type_Misc.html">Misc</a></h1>

<pre><span id="MODULEMisc"><span class="keyword">module</span> Misc</span>: <code class="code"><span class="keyword">sig</span></code> <a href="Misc.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
<div class="info-desc">
<p>Miscellaneous useful types and functions</p>

<p><b>Warning:</b> this module is unstable and part of
  <a href="Compiler_libs.html">compiler-libs</a>.</p>
</div>
</div>
<hr width="100%">
<h2 id="1_Reportingfatalerrors">Reporting fatal errors</h2>
<pre><span id="VALfatal_error"><span class="keyword">val</span> fatal_error</span> : <code class="type">string -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p>Raise the <code class="code"><span class="constructor">Fatal_error</span></code> exception with the given string.</p>
</div>
</div>

<pre><span id="VALfatal_errorf"><span class="keyword">val</span> fatal_errorf</span> : <code class="type">('a, Format.formatter, unit, 'b) format4 -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p>Format the arguments according to the given format string
      and raise <code class="code"><span class="constructor">Fatal_error</span></code> with the resulting string.</p>
</div>
</div>

<pre><span id="EXCEPTIONFatal_error"><span class="keyword">exception</span> Fatal_error</span></pre>
<h2 id="1_Exceptionsandfinalization">Exceptions and finalization</h2>
<pre><span id="VALtry_finally"><span class="keyword">val</span> try_finally</span> : <code class="type">?always:(unit -&gt; unit) -&gt; ?exceptionally:(unit -&gt; unit) -&gt; (unit -&gt; 'a) -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">try_finally&nbsp;work&nbsp;~always&nbsp;~exceptionally</code> is designed to run code
    in <code class="code">work</code> that may fail with an exception, and has two kind of
    cleanup routines: <code class="code">always</code>, that must be run after any execution
    of the function (typically, freeing system resources), and
    <code class="code">exceptionally</code>, that should be run only if <code class="code">work</code> or <code class="code">always</code>
    failed with an exception (typically, undoing user-visible state
    changes that would only make sense if the function completes
    correctly). For example:</p>

<pre class="codepre"><code class="code">      <span class="keyword">let</span> objfile = outputprefix ^ <span class="string">".cmo"</span> <span class="keyword">in</span>
      <span class="keyword">let</span> oc = open_out_bin objfile <span class="keyword">in</span>
      <span class="constructor">Misc</span>.try_finally
        (<span class="keyword">fun</span> () <span class="keywordsign">-&gt;</span>
           bytecode
           ++ <span class="constructor">Timings</span>.(accumulate_time (<span class="constructor">Generate</span> sourcefile))
               (<span class="constructor">Emitcode</span>.to_file oc modulename objfile);
           <span class="constructor">Warnings</span>.check_fatal ())
        ~always:(<span class="keyword">fun</span> () <span class="keywordsign">-&gt;</span> close_out oc)
        ~exceptionally:(<span class="keyword">fun</span> _exn <span class="keywordsign">-&gt;</span> remove_file objfile);
    </code></pre>
<p>If <code class="code">exceptionally</code> fail with an exception, it is propagated as
    usual.</p>

<p>If <code class="code">always</code> or <code class="code">exceptionally</code> use exceptions internally for
    control-flow but do not raise, then <code class="code">try_finally</code> is careful to
    preserve any exception backtrace coming from <code class="code">work</code> or <code class="code">always</code>
    for easier debugging.</p>
</div>
</div>

<pre><span id="VALreraise_preserving_backtrace"><span class="keyword">val</span> reraise_preserving_backtrace</span> : <code class="type">exn -&gt; (unit -&gt; unit) -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">reraise_preserving_backtrace&nbsp;e&nbsp;f</code> is (f (); raise e) except that the
    current backtrace is preserved, even if <code class="code">f</code> uses exceptions internally.</p>
</div>
</div>
<h2 id="1_Listoperations">List operations</h2>
<pre><span id="VALmap_end"><span class="keyword">val</span> map_end</span> : <code class="type">('a -&gt; 'b) -&gt; 'a list -&gt; 'b list -&gt; 'b list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">map_end&nbsp;f&nbsp;l&nbsp;t</code> is <code class="code">map&nbsp;f&nbsp;l&nbsp;@&nbsp;t</code>, just more efficient.</p>
</div>
</div>

<pre><span id="VALmap_left_right"><span class="keyword">val</span> map_left_right</span> : <code class="type">('a -&gt; 'b) -&gt; 'a list -&gt; 'b list</code></pre><div class="info ">
<div class="info-desc">
<p>Like <code class="code"><span class="constructor">List</span>.map</code>, with guaranteed left-to-right evaluation order</p>
</div>
</div>

<pre><span id="VALfor_all2"><span class="keyword">val</span> for_all2</span> : <code class="type">('a -&gt; 'b -&gt; bool) -&gt; 'a list -&gt; 'b list -&gt; bool</code></pre><div class="info ">
<div class="info-desc">
<p>Same as <code class="code"><span class="constructor">List</span>.for_all</code> but for a binary predicate.
           In addition, this <code class="code">for_all2</code> never fails: given two lists
           with different lengths, it returns false.</p>
</div>
</div>

<pre><span id="VALreplicate_list"><span class="keyword">val</span> replicate_list</span> : <code class="type">'a -&gt; int -&gt; 'a list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">replicate_list&nbsp;elem&nbsp;n</code> is the list with <code class="code">n</code> elements
           all identical to <code class="code">elem</code>.</p>
</div>
</div>

<pre><span id="VALlist_remove"><span class="keyword">val</span> list_remove</span> : <code class="type">'a -&gt; 'a list -&gt; 'a list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">list_remove&nbsp;x&nbsp;l</code> returns a copy of <code class="code">l</code> with the first
           element equal to <code class="code">x</code> removed.</p>
</div>
</div>

<pre><span id="VALsplit_last"><span class="keyword">val</span> split_last</span> : <code class="type">'a list -&gt; 'a list * 'a</code></pre><div class="info ">
<div class="info-desc">
<p>Return the last element and the other elements of the given list.</p>
</div>
</div>
<h2 id="1_Hashtableoperations">Hash table operations</h2>
<pre><span id="VALcreate_hashtable"><span class="keyword">val</span> create_hashtable</span> : <code class="type">int -&gt; ('a * 'b) list -&gt; ('a, 'b) Hashtbl.t</code></pre><div class="info ">
<div class="info-desc">
<p>Create a hashtable with the given initial size and fills it
           with the given bindings.</p>
</div>
</div>
<h2 id="1_Extensionstothestandardlibrary">Extensions to the standard library</h2>
<pre><span id="MODULEStdlib"><span class="keyword">module</span> <a href="Misc.Stdlib.html">Stdlib</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Misc.Stdlib.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><h2 id="1_Operationsonfilesandfilepaths">Operations on files and file paths</h2>
<pre><span id="VALfind_in_path"><span class="keyword">val</span> find_in_path</span> : <code class="type">string list -&gt; string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p>Search a file in a list of directories.</p>
</div>
</div>

<pre><span id="VALfind_in_path_rel"><span class="keyword">val</span> find_in_path_rel</span> : <code class="type">string list -&gt; string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p>Search a relative file in a list of directories.</p>
</div>
</div>

<pre><span id="VALfind_in_path_uncap"><span class="keyword">val</span> find_in_path_uncap</span> : <code class="type">string list -&gt; string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p>Same, but search also for uncapitalized name, i.e.
           if name is <code class="code"><span class="constructor">Foo</span>.ml</code>, allow <code class="code">/path/<span class="constructor">Foo</span>.ml</code> and <code class="code">/path/foo.ml</code>
           to match.</p>
</div>
</div>

<pre><span id="VALremove_file"><span class="keyword">val</span> remove_file</span> : <code class="type">string -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p>Delete the given file if it exists and is a regular file.
           Does nothing for other kinds of files.
           Never raises an error.</p>
</div>
</div>

<pre><span id="VALexpand_directory"><span class="keyword">val</span> expand_directory</span> : <code class="type">string -&gt; string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">expand_directory&nbsp;alt&nbsp;file</code> eventually expands a <code class="code">+</code> at the
           beginning of file into <code class="code">alt</code> (an alternate root directory)</p>
</div>
</div>

<pre><span id="VALsplit_path_contents"><span class="keyword">val</span> split_path_contents</span> : <code class="type">?sep:char -&gt; string -&gt; string list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">split_path_contents&nbsp;?sep&nbsp;s</code> interprets <code class="code">s</code> as the value of
          a "PATH"-like variable and returns the corresponding list of
          directories. <code class="code">s</code> is split using the platform-specific delimiter, or
          <code class="code">~sep</code> if it is passed.</p>

<p>Returns the empty list if <code class="code">s</code> is empty.</p>
</div>
</div>

<pre><span id="VALcopy_file"><span class="keyword">val</span> copy_file</span> : <code class="type">in_channel -&gt; out_channel -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">copy_file&nbsp;ic&nbsp;oc</code> reads the contents of file <code class="code">ic</code> and copies
           them to <code class="code">oc</code>. It stops when encountering EOF on <code class="code">ic</code>.</p>
</div>
</div>

<pre><span id="VALcopy_file_chunk"><span class="keyword">val</span> copy_file_chunk</span> : <code class="type">in_channel -&gt; out_channel -&gt; int -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">copy_file_chunk&nbsp;ic&nbsp;oc&nbsp;n</code> reads <code class="code">n</code> bytes from <code class="code">ic</code> and copies
           them to <code class="code">oc</code>. It raises <code class="code"><span class="constructor">End_of_file</span></code> when encountering
           EOF on <code class="code">ic</code>.</p>
</div>
</div>

<pre><span id="VALstring_of_file"><span class="keyword">val</span> string_of_file</span> : <code class="type">in_channel -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">string_of_file&nbsp;ic</code> reads the contents of file <code class="code">ic</code> and copies
           them to a string. It stops when encountering EOF on <code class="code">ic</code>.</p>
</div>
</div>

<pre><span id="VALoutput_to_file_via_temporary"><span class="keyword">val</span> output_to_file_via_temporary</span> : <code class="type">?mode:open_flag list -&gt;<br>       string -&gt; (string -&gt; out_channel -&gt; 'a) -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p>Produce output in temporary file, then rename it
           (as atomically as possible) to the desired output file name.
           <code class="code">output_to_file_via_temporary&nbsp;filename&nbsp;fn</code> opens a temporary file
           which is passed to <code class="code">fn</code> (name + output channel).  When <code class="code">fn</code> returns,
           the channel is closed and the temporary file is renamed to
           <code class="code">filename</code>.</p>
</div>
</div>

<pre><span id="VALprotect_writing_to_file"><span class="keyword">val</span> protect_writing_to_file</span> : <code class="type">filename:string -&gt; f:(out_channel -&gt; 'a) -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p>Open the given <code class="code">filename</code> for writing (in binary mode), pass
          the <code class="code">out_channel</code> to the given function, then close the
          channel. If the function raises an exception then <code class="code">filename</code>
          will be removed.</p>
</div>
</div>

<pre><span id="VALconcat_null_terminated"><span class="keyword">val</span> concat_null_terminated</span> : <code class="type">string list -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">concat_null_terminated&nbsp;[x1;x2;&nbsp;...&nbsp;xn]</code> is
    <code class="code">x1&nbsp;^&nbsp;<span class="string">"\000"</span>&nbsp;^&nbsp;x2&nbsp;^&nbsp;<span class="string">"\000"</span>&nbsp;^&nbsp;...&nbsp;^&nbsp;xn&nbsp;^&nbsp;<span class="string">"\000"</span></code></p>
</div>
</div>

<pre><span id="VALsplit_null_terminated"><span class="keyword">val</span> split_null_terminated</span> : <code class="type">string -&gt; string list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">split_null_terminated&nbsp;s</code> is similar
    <code class="code"><span class="constructor">String</span>.split_on_char&nbsp;<span class="string">'\000'</span></code> but ignores the trailing separator, if any</p>
</div>
</div>

<pre><span id="VALchop_extensions"><span class="keyword">val</span> chop_extensions</span> : <code class="type">string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p>Return the given file name without its extensions. The extensions
           is the longest suffix starting with a period and not including
           a directory separator, <code class="code">.xyz.uvw</code> for instance.</p>

<p>Return the given name if it does not contain an extension.</p>
</div>
</div>
<h2 id="1_Integeroperations">Integer operations</h2>
<pre><span id="VALlog2"><span class="keyword">val</span> log2</span> : <code class="type">int -&gt; int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">log2&nbsp;n</code> returns <code class="code">s</code> such that <code class="code">n&nbsp;=&nbsp;1&nbsp;<span class="keyword">lsl</span>&nbsp;s</code>
           if <code class="code">n</code> is a power of 2</p>
</div>
</div>

<pre><span id="VALalign"><span class="keyword">val</span> align</span> : <code class="type">int -&gt; int -&gt; int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">align&nbsp;n&nbsp;a</code> rounds <code class="code">n</code> upwards to a multiple of <code class="code">a</code>
           (a power of 2).</p>
</div>
</div>

<pre><span id="VALno_overflow_add"><span class="keyword">val</span> no_overflow_add</span> : <code class="type">int -&gt; int -&gt; bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">no_overflow_add&nbsp;n1&nbsp;n2</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of
           <code class="code">n1&nbsp;+&nbsp;n2</code> does not overflow.</p>
</div>
</div>

<pre><span id="VALno_overflow_sub"><span class="keyword">val</span> no_overflow_sub</span> : <code class="type">int -&gt; int -&gt; bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">no_overflow_sub&nbsp;n1&nbsp;n2</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of
           <code class="code">n1&nbsp;-&nbsp;n2</code> does not overflow.</p>
</div>
</div>

<pre><span id="VALno_overflow_mul"><span class="keyword">val</span> no_overflow_mul</span> : <code class="type">int -&gt; int -&gt; bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">no_overflow_mul&nbsp;n1&nbsp;n2</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of
           <code class="code">n1&nbsp;*&nbsp;n2</code> does not overflow.</p>
</div>
</div>

<pre><span id="VALno_overflow_lsl"><span class="keyword">val</span> no_overflow_lsl</span> : <code class="type">int -&gt; int -&gt; bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">no_overflow_lsl&nbsp;n&nbsp;k</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of
           <code class="code">n&nbsp;<span class="keyword">lsl</span>&nbsp;k</code> does not overflow.</p>
</div>
</div>

<pre><span id="MODULEInt_literal_converter"><span class="keyword">module</span> <a href="Misc.Int_literal_converter.html">Int_literal_converter</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Misc.Int_literal_converter.html">..</a> <code class="code"><span class="keyword">end</span></code></pre>
<pre><span id="VALfind_first_mono"><span class="keyword">val</span> find_first_mono</span> : <code class="type">(int -&gt; bool) -&gt; int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">find_first_mono&nbsp;p</code> takes an integer predicate <code class="code">p&nbsp;:&nbsp;int&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;bool</code>
     that we assume:
     1. is monotonic on natural numbers:
        if <code class="code">a&nbsp;&lt;=&nbsp;b</code> then <code class="code">p&nbsp;a</code> implies <code class="code">p&nbsp;b</code>,
     2. is satisfied for some natural numbers in range <code class="code">0;&nbsp;max_int</code>
        (this is equivalent to: <code class="code">p&nbsp;max_int&nbsp;=&nbsp;<span class="keyword">true</span></code>).</p>

<p><code class="code">find_first_mono&nbsp;p</code> is the smallest natural number N that satisfies <code class="code">p</code>,
     computed in O(log(N)) calls to <code class="code">p</code>.</p>

<p>Our implementation supports two cases where the preconditions on <code class="code">p</code>
     are not respected:</p>
<ul>
<li>If <code class="code">p</code> is always <code class="code"><span class="keyword">false</span></code>, we silently return <code class="code">max_int</code>
       instead of looping or crashing.</li>
<li>If <code class="code">p</code> is non-monotonic but eventually true,
       we return some satisfying value.</li>
</ul>
</div>
</div>
<h2 id="1_Stringoperations">String operations</h2>
<pre><span id="VALsearch_substring"><span class="keyword">val</span> search_substring</span> : <code class="type">string -&gt; string -&gt; int -&gt; int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">search_substring&nbsp;pat&nbsp;str&nbsp;start</code> returns the position of the first
           occurrence of string <code class="code">pat</code> in string <code class="code">str</code>.  Search starts
           at offset <code class="code">start</code> in <code class="code">str</code>.  Raise <code class="code"><span class="constructor">Not_found</span></code> if <code class="code">pat</code>
           does not occur.</p>
</div>
</div>

<pre><span id="VALreplace_substring"><span class="keyword">val</span> replace_substring</span> : <code class="type">before:string -&gt; after:string -&gt; string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">replace_substring&nbsp;~before&nbsp;~after&nbsp;str</code> replaces all
           occurrences of <code class="code">before</code> with <code class="code">after</code> in <code class="code">str</code> and returns
           the resulting string.</p>
</div>
</div>

<pre><span id="VALrev_split_words"><span class="keyword">val</span> rev_split_words</span> : <code class="type">string -&gt; string list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">rev_split_words&nbsp;s</code> splits <code class="code">s</code> in blank-separated words, and returns
           the list of words in reverse order.</p>
</div>
</div>

<pre><span id="VALcut_at"><span class="keyword">val</span> cut_at</span> : <code class="type">string -&gt; char -&gt; string * string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code"><span class="constructor">String</span>.cut_at&nbsp;s&nbsp;c</code> returns a pair containing the sub-string before
   the first occurrence of <code class="code">c</code> in <code class="code">s</code>, and the sub-string after the
   first occurrence of <code class="code">c</code> in <code class="code">s</code>.
   <code class="code"><span class="keyword">let</span>&nbsp;(before,&nbsp;after)&nbsp;=&nbsp;<span class="constructor">String</span>.cut_at&nbsp;s&nbsp;c&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;before&nbsp;^&nbsp;<span class="constructor">String</span>.make&nbsp;1&nbsp;c&nbsp;^&nbsp;after</code> is the identity if <code class="code">s</code> contains <code class="code">c</code>.</p>

<p>Raise <code class="code"><span class="constructor">Not_found</span></code> if the character does not appear in the string</p>
</div>
<ul class="info-attributes">
<li><b>Since</b> 4.01</li>
</ul>
</div>

<pre><span id="VALordinal_suffix"><span class="keyword">val</span> ordinal_suffix</span> : <code class="type">int -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">ordinal_suffix&nbsp;n</code> is the appropriate suffix to append to the numeral <code class="code">n</code> as
    an ordinal number: <code class="code">1</code> -&gt; <code class="code"><span class="string">"st"</span></code>, <code class="code">2</code> -&gt; <code class="code"><span class="string">"nd"</span></code>, <code class="code">3</code> -&gt; <code class="code"><span class="string">"rd"</span></code>,
    <code class="code">4</code> -&gt; <code class="code"><span class="string">"th"</span></code>, and so on.  Handles larger numbers (e.g., <code class="code">42</code> -&gt; <code class="code"><span class="string">"nd"</span></code>) and
    the numbers 11--13 (which all get <code class="code"><span class="string">"th"</span></code>) correctly.</p>
</div>
</div>

<pre><span id="VALnormalise_eol"><span class="keyword">val</span> normalise_eol</span> : <code class="type">string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">normalise_eol&nbsp;s</code> returns a fresh copy of <code class="code">s</code> with any '\r' characters
   removed. Intended for pre-processing text which will subsequently be printed
   on a channel which performs EOL transformations (i.e. Windows)</p>
</div>
</div>

<pre><span id="VALdelete_eol_spaces"><span class="keyword">val</span> delete_eol_spaces</span> : <code class="type">string -&gt; string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">delete_eol_spaces&nbsp;s</code> returns a fresh copy of <code class="code">s</code> with any end of
   line spaces removed. Intended to normalize the output of the
   toplevel for tests.</p>
</div>
</div>
<h2 id="1_Operationsonreferences">Operations on references</h2>
<pre><code><span id="TYPEref_and_value"><span class="keyword">type</span> <code class="type"></code>ref_and_value</span> = </code></pre><table class="typetable">
<tbody><tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTref_and_value.R"><span class="constructor">R</span></span> <span class="keyword">:</span> <code class="type">'a ref * 'a</code> <span class="keyword">-&gt;</span> <code class="type"><a href="Misc.html#TYPEref_and_value">ref_and_value</a></code></code></td>

</tr></tbody></table>



<pre><span id="VALprotect_refs"><span class="keyword">val</span> protect_refs</span> : <code class="type"><a href="Misc.html#TYPEref_and_value">ref_and_value</a> list -&gt; (unit -&gt; 'a) -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">protect_refs&nbsp;l&nbsp;f</code> temporarily sets <code class="code">r</code> to <code class="code">v</code> for each <code class="code"><span class="constructor">R</span>&nbsp;(r,&nbsp;v)</code> in <code class="code">l</code>
    while executing <code class="code">f</code>. The previous contents of the references is restored
    even if <code class="code">f</code> raises an exception, without altering the exception backtrace.</p>
</div>
</div>

<pre><span id="VALget_ref"><span class="keyword">val</span> get_ref</span> : <code class="type">'a list ref -&gt; 'a list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_ref&nbsp;lr</code> returns the content of the list reference <code class="code">lr</code> and reset
           its content to the empty list.</p>
</div>
</div>

<pre><span id="VALset_or_ignore"><span class="keyword">val</span> set_or_ignore</span> : <code class="type">('a -&gt; 'b option) -&gt; 'b option ref -&gt; 'a -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">set_or_ignore&nbsp;f&nbsp;opt&nbsp;x</code> sets <code class="code">opt</code> to <code class="code">f&nbsp;x</code> if it returns <code class="code"><span class="constructor">Some</span>&nbsp;_</code>,
           or leaves it unmodified if it returns <code class="code"><span class="constructor">None</span></code>.</p>
</div>
</div>
<h2 id="1_Operationsontriplesandquadruples">Operations on triples and quadruples</h2>
<pre><span id="VALfst3"><span class="keyword">val</span> fst3</span> : <code class="type">'a * 'b * 'c -&gt; 'a</code></pre>
<pre><span id="VALsnd3"><span class="keyword">val</span> snd3</span> : <code class="type">'a * 'b * 'c -&gt; 'b</code></pre>
<pre><span id="VALthd3"><span class="keyword">val</span> thd3</span> : <code class="type">'a * 'b * 'c -&gt; 'c</code></pre>
<pre><span id="VALfst4"><span class="keyword">val</span> fst4</span> : <code class="type">'a * 'b * 'c * 'd -&gt; 'a</code></pre>
<pre><span id="VALsnd4"><span class="keyword">val</span> snd4</span> : <code class="type">'a * 'b * 'c * 'd -&gt; 'b</code></pre>
<pre><span id="VALthd4"><span class="keyword">val</span> thd4</span> : <code class="type">'a * 'b * 'c * 'd -&gt; 'c</code></pre>
<pre><span id="VALfor4"><span class="keyword">val</span> for4</span> : <code class="type">'a * 'b * 'c * 'd -&gt; 'd</code></pre><h2 id="1_Longstrings">Long strings</h2><p>``Long strings'' are mutable arrays of characters that are not limited
    in length to <code class="code"><span class="constructor">Sys</span>.max_string_length</code>.</p>

<pre><span id="MODULELongString"><span class="keyword">module</span> <a href="Misc.LongString.html">LongString</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Misc.LongString.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><h2 id="1_Spellcheckinganddidyoumeansuggestions">Spell checking and ``did you mean'' suggestions</h2>
<pre><span id="VALedit_distance"><span class="keyword">val</span> edit_distance</span> : <code class="type">string -&gt; string -&gt; int -&gt; int option</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">edit_distance&nbsp;a&nbsp;b&nbsp;cutoff</code> computes the edit distance between
    strings <code class="code">a</code> and <code class="code">b</code>. To help efficiency, it uses a cutoff: if the
    distance <code class="code">d</code> is smaller than <code class="code">cutoff</code>, it returns <code class="code"><span class="constructor">Some</span>&nbsp;d</code>, else
    <code class="code"><span class="constructor">None</span></code>.</p>

<p>The distance algorithm currently used is Damerau-Levenshtein: it
    computes the number of insertion, deletion, substitution of
    letters, or swapping of adjacent letters to go from one word to the
    other. The particular algorithm may change in the future.</p>
</div>
</div>

<pre><span id="VALspellcheck"><span class="keyword">val</span> spellcheck</span> : <code class="type">string list -&gt; string -&gt; string list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">spellcheck&nbsp;env&nbsp;name</code> takes a list of names <code class="code">env</code> that exist in
    the current environment and an erroneous <code class="code">name</code>, and returns a
    list of suggestions taken from <code class="code">env</code>, that are close enough to
    <code class="code">name</code> that it may be a typo for one of them.</p>
</div>
</div>

<pre><span id="VALdid_you_mean"><span class="keyword">val</span> did_you_mean</span> : <code class="type">Format.formatter -&gt; (unit -&gt; string list) -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">did_you_mean&nbsp;ppf&nbsp;get_choices</code> hints that the user may have meant
    one of the option returned by calling <code class="code">get_choices</code>. It does nothing
    if the returned list is empty.</p>

<p>The <code class="code">unit&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;...</code> thunking is meant to delay any potentially-slow
    computation (typically computing edit-distance with many things
    from the current environment) to when the hint message is to be
    printed. You should print an understandable error message before
    calling <code class="code">did_you_mean</code>, so that users get a clear notification of
    the failure even if producing the hint is slow.</p>
</div>
</div>
<h2 id="1_Coloredterminaloutput">Colored terminal output </h2>
<pre><span id="MODULEColor"><span class="keyword">module</span> <a href="Misc.Color.html">Color</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Misc.Color.html">..</a> <code class="code"><span class="keyword">end</span></code></pre>
<pre><span id="MODULEError_style"><span class="keyword">module</span> <a href="Misc.Error_style.html">Error_style</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Misc.Error_style.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><h2 id="1_Formattedoutput">Formatted output</h2>
<pre><span id="VALprint_if"><span class="keyword">val</span> print_if</span> : <code class="type">Format.formatter -&gt;<br>       bool ref -&gt; (Format.formatter -&gt; 'a -&gt; unit) -&gt; 'a -&gt; 'a</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_if&nbsp;ppf&nbsp;flag&nbsp;fmt&nbsp;x</code> prints <code class="code">x</code> with <code class="code">fmt</code> on <code class="code">ppf</code> if <code class="code">b</code> is true.</p>
</div>
</div>

<pre><span id="VALpp_two_columns"><span class="keyword">val</span> pp_two_columns</span> : <code class="type">?sep:string -&gt;<br>       ?max_lines:int -&gt; Format.formatter -&gt; (string * string) list -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">pp_two_columns&nbsp;?sep&nbsp;?max_lines&nbsp;ppf&nbsp;l</code> prints the lines in <code class="code">l</code> as two
   columns separated by <code class="code">sep</code> ("|" by default). <code class="code">max_lines</code> can be used to
   indicate a maximum number of lines to print -- an ellipsis gets inserted at
   the middle if the input has too many lines.</p>

<p>Example:</p>

<pre class="verbatim">pp_two_columns ~max_lines:3 Format.std_formatter [
      "abc", "hello";
      "def", "zzz";
      "a"  , "bllbl";
      "bb" , "dddddd";
    ]</pre>
<p>prints</p>

<pre class="verbatim">    abc | hello
    ...
    bb  | dddddd
   </pre></div>
</div>

<pre><span id="VALprint_see_manual"><span class="keyword">val</span> print_see_manual</span> : <code class="type">Format.formatter -&gt; int list -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p>See manual section</p>
</div>
</div>
<h2 id="1_Displayingconfigurationvariables">Displaying configuration variables</h2>
<pre><span id="VALshow_config_and_exit"><span class="keyword">val</span> show_config_and_exit</span> : <code class="type">unit -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p>Display the values of all compiler configuration variables from module
      <code class="code"><span class="constructor">Config</span></code>, then exit the program with code 0.</p>
</div>
</div>

<pre><span id="VALshow_config_variable_and_exit"><span class="keyword">val</span> show_config_variable_and_exit</span> : <code class="type">string -&gt; unit</code></pre><div class="info ">
<div class="info-desc">
<p>Display the value of the given configuration variable,
      then exit the program with code 0.</p>
</div>
</div>
<h2 id="1_Handlingofbuildmaps">Handling of build maps</h2><p>Build maps cause the compiler to normalize file names embedded in
    object files, thus leading to more reproducible builds.</p>

<pre><span id="VALget_build_path_prefix_map"><span class="keyword">val</span> get_build_path_prefix_map</span> : <code class="type">unit -&gt; <a href="Build_path_prefix_map.html#TYPEmap">Build_path_prefix_map.map</a> option</code></pre><div class="info ">
<div class="info-desc">
<p>Returns the map encoded in the <code class="code"><span class="constructor">BUILD_PATH_PREFIX_MAP</span></code> environment
    variable.</p>
</div>
</div>

<pre><span id="VALdebug_prefix_map_flags"><span class="keyword">val</span> debug_prefix_map_flags</span> : <code class="type">unit -&gt; string list</code></pre><div class="info ">
<div class="info-desc">
<p>Returns the list of <code class="code">--debug-prefix-map</code> flags to be passed to the
    assembler, built from the <code class="code"><span class="constructor">BUILD_PATH_PREFIX_MAP</span></code> environment variable.</p>
</div>
</div>
<h2 id="1_Handlingofmagicnumbers">Handling of magic numbers</h2>
<pre><span id="MODULEMagic_number"><span class="keyword">module</span> <a href="Misc.Magic_number.html">Magic_number</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Misc.Magic_number.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><h2 id="1_Miscellaneoustypealiases">Miscellaneous type aliases</h2>
<pre><span id="TYPEfilepath"><span class="keyword">type</span> <code class="type"></code>filepath</span> = <code class="type">string</code> </pre>


<pre><span id="TYPEmodname"><span class="keyword">type</span> <code class="type"></code>modname</span> = <code class="type">string</code> </pre>


<pre><span id="TYPEcrcs"><span class="keyword">type</span> <code class="type"></code>crcs</span> = <code class="type">(<a href="Misc.html#TYPEmodname">modname</a> * Digest.t option) list</code> </pre>


<pre><span id="TYPEalerts"><span class="keyword">type</span> <code class="type"></code>alerts</span> = <code class="type">string Stdlib.String.Map.t</code> </pre>


</div></body></html>